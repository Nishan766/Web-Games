<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroids</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #000;
            color: #0f0;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        canvas {
            border: 2px solid #0f0;
            background: #000;
        }
        .game-info {
            display: flex;
            gap: 30px;
            margin: 20px 0;
            font-size: 18px;
            color: #0f0;
        }
        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: #0f0;
            color: #000;
            text-decoration: none;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }
        .controls {
            text-align: center;
            margin-top: 20px;
            color: #0f0;
        }
        h1 {
            color: #0f0;
            text-shadow: 0 0 10px #0f0;
        }
    </style>
</head>
<body>
    <h1>ASTEROIDS</h1>
    <div class="game-info">
        <div>SCORE: <span id="score">0</span></div>
        <div>LIVES: <span id="lives">3</span></div>
        <div>LEVEL: <span id="level">1</span></div>
    </div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <div class="controls">
        <p>W: THRUST | A/D: ROTATE | SPACE: FIRE</p>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        let score = 0;
        let lives = 3;
        let level = 1;
        let gameRunning = true;

        const ship = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            angle: 0,
            velocity: { x: 0, y: 0 },
            thrust: false,
            size: 8
        };

        const bullets = [];
        const asteroids = [];
        const particles = [];

        function createAsteroid(x, y, size) {
            return {
                x: x || Math.random() * canvas.width,
                y: y || Math.random() * canvas.height,
                velocity: {
                    x: (Math.random() - 0.5) * 4,
                    y: (Math.random() - 0.5) * 4
                },
                angle: Math.random() * Math.PI * 2,
                rotation: (Math.random() - 0.5) * 0.1,
                size: size || 40,
                points: generateAsteroidPoints(size || 40)
            };
        }

        function generateAsteroidPoints(size) {
            const points = [];
            const numPoints = 8 + Math.floor(Math.random() * 4);
            for (let i = 0; i < numPoints; i++) {
                const angle = (i / numPoints) * Math.PI * 2;
                const radius = size * (0.7 + Math.random() * 0.3);
                points.push({
                    x: Math.cos(angle) * radius,
                    y: Math.sin(angle) * radius
                });
            }
            return points;
        }

        function initLevel() {
            asteroids.length = 0;
            const numAsteroids = 4 + level;
            for (let i = 0; i < numAsteroids; i++) {
                let x, y;
                do {
                    x = Math.random() * canvas.width;
                    y = Math.random() * canvas.height;
                } while (Math.hypot(x - ship.x, y - ship.y) < 100);
                asteroids.push(createAsteroid(x, y, 40));
            }
        }

        function drawShip() {
            ctx.save();
            ctx.translate(ship.x, ship.y);
            ctx.rotate(ship.angle);
            
            ctx.strokeStyle = '#0f0';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(ship.size, 0);
            ctx.lineTo(-ship.size, -ship.size/2);
            ctx.lineTo(-ship.size/2, 0);
            ctx.lineTo(-ship.size, ship.size/2);
            ctx.closePath();
            ctx.stroke();

            if (ship.thrust) {
                ctx.strokeStyle = '#f80';
                ctx.beginPath();
                ctx.moveTo(-ship.size, -3);
                ctx.lineTo(-ship.size - 8, 0);
                ctx.lineTo(-ship.size, 3);
                ctx.stroke();
            }
            
            ctx.restore();
        }

        function drawAsteroid(asteroid) {
            ctx.save();
            ctx.translate(asteroid.x, asteroid.y);
            ctx.rotate(asteroid.angle);
            
            ctx.strokeStyle = '#0f0';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(asteroid.points[0].x, asteroid.points[0].y);
            for (let i = 1; i < asteroid.points.length; i++) {
                ctx.lineTo(asteroid.points[i].x, asteroid.points[i].y);
            }
            ctx.closePath();
            ctx.stroke();
            
            ctx.restore();
        }

        function drawBullet(bullet) {
            ctx.fillStyle = '#0f0';
            ctx.beginPath();
            ctx.arc(bullet.x, bullet.y, 2, 0, Math.PI * 2);
            ctx.fill();
        }

        function updateShip() {
            if (keys['w'] || keys['W']) {
                ship.thrust = true;
                ship.velocity.x += Math.cos(ship.angle) * 0.3;
                ship.velocity.y += Math.sin(ship.angle) * 0.3;
            } else {
                ship.thrust = false;
            }

            if (keys['a'] || keys['A']) {
                ship.angle -= 0.1;
            }
            if (keys['d'] || keys['D']) {
                ship.angle += 0.1;
            }

            ship.velocity.x *= 0.99;
            ship.velocity.y *= 0.99;

            ship.x += ship.velocity.x;
            ship.y += ship.velocity.y;

            if (ship.x < 0) ship.x = canvas.width;
            if (ship.x > canvas.width) ship.x = 0;
            if (ship.y < 0) ship.y = canvas.height;
            if (ship.y > canvas.height) ship.y = 0;
        }

        function updateBullets() {
            for (let i = bullets.length - 1; i >= 0; i--) {
                const bullet = bullets[i];
                bullet.x += bullet.velocity.x;
                bullet.y += bullet.velocity.y;
                bullet.life--;

                if (bullet.life <= 0 || bullet.x < 0 || bullet.x > canvas.width || 
                    bullet.y < 0 || bullet.y > canvas.height) {
                    bullets.splice(i, 1);
                }
            }
        }

        function updateAsteroids() {
            asteroids.forEach(asteroid => {
                asteroid.x += asteroid.velocity.x;
                asteroid.y += asteroid.velocity.y;
                asteroid.angle += asteroid.rotation;

                if (asteroid.x < 0) asteroid.x = canvas.width;
                if (asteroid.x > canvas.width) asteroid.x = 0;
                if (asteroid.y < 0) asteroid.y = canvas.height;
                if (asteroid.y > canvas.height) asteroid.y = 0;
            });
        }

        function checkCollisions() {
            // Bullet-asteroid collisions
            for (let i = bullets.length - 1; i >= 0; i--) {
                for (let j = asteroids.length - 1; j >= 0; j--) {
                    const bullet = bullets[i];
                    const asteroid = asteroids[j];
                    
                    if (Math.hypot(bullet.x - asteroid.x, bullet.y - asteroid.y) < asteroid.size) {
                        bullets.splice(i, 1);
                        asteroids.splice(j, 1);
                        
                        score += asteroid.size === 40 ? 20 : asteroid.size === 20 ? 50 : 100;
                        document.getElementById('score').textContent = score;

                        if (asteroid.size > 10) {
                            const newSize = asteroid.size / 2;
                            asteroids.push(createAsteroid(asteroid.x, asteroid.y, newSize));
                            asteroids.push(createAsteroid(asteroid.x, asteroid.y, newSize));
                        }
                        break;
                    }
                }
            }

            // Ship-asteroid collisions
            asteroids.forEach(asteroid => {
                if (Math.hypot(ship.x - asteroid.x, ship.y - asteroid.y) < asteroid.size + ship.size) {
                    lives--;
                    document.getElementById('lives').textContent = lives;
                    
                    if (lives <= 0) {
                        alert('GAME OVER! SCORE: ' + score);
                        resetGame();
                    } else {
                        ship.x = canvas.width / 2;
                        ship.y = canvas.height / 2;
                        ship.velocity = { x: 0, y: 0 };
                    }
                }
            });

            if (asteroids.length === 0) {
                level++;
                document.getElementById('level').textContent = level;
                initLevel();
            }
        }

        function resetGame() {
            score = 0;
            lives = 3;
            level = 1;
            ship.x = canvas.width / 2;
            ship.y = canvas.height / 2;
            ship.velocity = { x: 0, y: 0 };
            bullets.length = 0;
            document.getElementById('score').textContent = score;
            document.getElementById('lives').textContent = lives;
            document.getElementById('level').textContent = level;
            initLevel();
        }

        function draw() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawShip();
            bullets.forEach(drawBullet);
            asteroids.forEach(drawAsteroid);
        }

        function gameLoop() {
            updateShip();
            updateBullets();
            updateAsteroids();
            checkCollisions();
            draw();
            requestAnimationFrame(gameLoop);
        }

        let keys = {};
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            if (e.key === ' ') {
                bullets.push({
                    x: ship.x + Math.cos(ship.angle) * ship.size,
                    y: ship.y + Math.sin(ship.angle) * ship.size,
                    velocity: {
                        x: Math.cos(ship.angle) * 8,
                        y: Math.sin(ship.angle) * 8
                    },
                    life: 60
                });
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        initLevel();
        gameLoop();
    </script>
</body>
</html>